---
title: 眠りの森の美女 発表会アプリ Phase 2 実装計画
date: 2026-02-22
---

# Phase 2: インタラクションとデータ連携の実装計画

Phase 1（視覚的感動の創出・モック完成）が完了したため、次のステップとなるPhase 2の計画を策定します。
本フェーズでは、「発表会そのものを物語化する装置」としてのコア機能である**「生徒の意気込み（光の粒）」を実際に投稿し、リアルタイムに森へ反映させる仕組み**を構築します。

## 1. ユーザー確認事項 (User Review Required)
> [!IMPORTANT]
> - **インフラのセットアップ**: Vercelへの初回デプロイと、Supabaseプロジェクトの新規作成・環境変数の設定が必要になります。
> - **認証の仕様**: 生徒用の投稿画面は「パスワード制（スタジオ共通パスワード）」にするか、「マジックリンクや個別ログイン」にするか、手軽さの観点から**共通パスワード**または**簡単な認証なし（URLを知っている人のみ）**を推奨しますが、いかがでしょうか？

## 2. 次の作業ステップ (Proposed Steps)

### Step 1: Vercelへのデプロイ（見た目の実機確認）
- GitHubリポジトリへ現在のコードをプッシュします。
- Vercelと連携し、スマートフォン等で実際のパララックスや光の粒の動きを検証・微調整できるようにします。

### Step 2: Supabaseプロジェクトの準備と接続
- Supabaseで新規プロジェクトを作成します。
- Next.jsプロジェクトに `@supabase/ssr` などを導入し、接続設定を行います。

### Step 3: データベース（DB）設計
- 以下のテーブルを作成します。
  - **`messages` (意気込みテーブル)**
    - `id` (UUID)
    - `name` (生徒名/ニックネーム)
    - `role` (演目/配役)
    - `text` (意気込みメッセージ)
    - `x_pos`, `y_pos`, `scale` (森での表示位置とサイズ：投稿時にランダム生成)
    - `created_at` (投稿日時)
    - `is_approved` (表示フラグ。Phase 1-2ではデフォルトtrue)

### Step 4: 投稿フォーム（生徒用画面）の実装
- `MessagesSection.tsx` の「意気込みを投稿する」ボタンから遷移する投稿用モーダル、または別ページを作成。
- フォーム内容（名前、配役、一言）を入力してSupabaseへ送信する機能を実装。

### Step 5: 「光の粒」の動的レンダリング
- `MessagesSection.tsx` のモックデータを削除し、Supabaseからリアルタイム（または都度）データを取得して光の粒を生成するように改修。
- 投稿が増えるごとに森の光が増していく体験を実現。

## 3. 検証計画 (Verification Plan)
- **手動検証**: ローカルサーバーでフォームから投稿を行い、画面をリロードせずに（もしくはリロードで対象ページに）光の粒が即座に追加されることを確認。
- **実機検証**: Vercel上のプレビューURLをスマホで開き、実際に意気込みを投稿できるか、アニメーションが重くないかを確認。
